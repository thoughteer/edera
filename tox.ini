[tox]
envlist = py{27,34,35,36},pypy
skip_missing_interpreters = True

[testenv]
deps =
    pytest
    pytest-benchmark
    pytest-cov
    pytest-forked
    pytest-xdist
commands =
    py.test \
        -p no:cacheprovider \
        -n 6 \
        --forked \
        --cov=edera \
        --benchmark-skip \
        -v {posargs:tests}
    py.test \
        -p no:cacheprovider \
        --benchmark-only \
        --benchmark-min-rounds=10 \
        --benchmark-autosave \
        --benchmark-cprofile=tottime \
        --benchmark-compare \
        --benchmark-compare-fail=median:50% \
        -v {posargs:tests}
setenv =
    EDERA_MONGODB_URI = mongodb://localhost
    EDERA_ZOOKEEPER_HOSTS = localhost:2181

[testenv:daemon]
commands =
    python -m edera.demo.daemon {posargs}

[testenv:ui]
commands =
    python -m edera.demo.ui {posargs}

[testenv:ide]
usedevelop = True
deps =
    {[testenv]deps}
    ipython
    pylint
commands =
